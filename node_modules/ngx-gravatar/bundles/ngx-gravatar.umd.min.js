!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("ts-md5/dist/md5")):"function"==typeof define&&define.amd?define("ngx-gravatar",["exports","@angular/core","ts-md5/dist/md5"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self)["ngx-gravatar"]={},t.ng.core,t.md5)}(this,(function(t,e,r){"use strict";var i,a,o=new e.InjectionToken("gravatarCustom.config");(i=t.FALLBACK||(t.FALLBACK={})).blank="blank",i.identicon="identicon",i.mm="mm",i.mp="mp",i.monsterid="monsterid",i.retro="retro",i.robohash="robohash",i.wavatar="wavatar",(a=t.RATING||(t.RATING={})).g="g",a.pg="pg",a.r="r",a.x="x";var n={fallback:t.FALLBACK.retro,size:40,cornerRadius:0,preferGravatar:!1,hasBorder:!1,borderColor:"#000000",borderRadius:"50%",borderStyle:"solid",borderWidth:1,round:!0,backgroundColor:"transparent",rating:t.RATING.g,ratio:2},s=function(){function t(t){this.gravatarConfig=t,this.defaultConfig=Object.assign({},n),this.gravatarConfig&&(this.defaultConfig=Object.assign(Object.assign({},this.defaultConfig),this.gravatarConfig))}return t.prototype.getDefaultConfig=function(){return this.defaultConfig},t.prototype.generateGravatarUrl=function(t,e,i,a,o){var n;if(void 0===i&&(i=this.defaultConfig.size),void 0===a&&(a=this.defaultConfig.rating),void 0===o&&(o=this.defaultConfig.fallback),e)n=e;else{try{t=t.trim().toLowerCase()}catch(e){console.error("[ngx-gravatar] - Email ("+t+") is not a string. Empty string is used as a default email."),t=""}n=r.Md5.hashStr(t)}return"https://www.gravatar.com/avatar/"+n+"?s="+i+"&r="+a+"&d="+o},t}();s.ɵprov=e.ɵɵdefineInjectable({factory:function(){return new s(e.ɵɵinject(o,8))},token:s,providedIn:"root"}),s.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],s.ctorParameters=function(){return[{type:void 0,decorators:[{type:e.Optional},{type:e.Inject,args:[o]}]}]};var d=function(){function t(t,e,r){var i=this;this.elementRef=t,this.renderer=e,this.gravatarService=r,this.style={},this.initialized=!1,this.defaultConfig=this.gravatarService.getDefaultConfig(),this.renderer.listen(this.elementRef.nativeElement,"error",(function(t){i.isGravatarUsed||i.initializeAvatar(!0)}))}return t.prototype.ngOnInit=function(){this.initializeAvatar(),this.initialized=!0,this.isGravatarUsed=!1},t.prototype.ngOnChanges=function(){this.initialized&&this.initializeAvatar()},t.prototype.setDefaultValues=function(){this.size=this.computeSize(),this.ratio=void 0===this.ratio?this.defaultConfig.ratio:this.ratio,this.requestedSize=this.size*this.ratio,this.round=void 0===this.round?this.defaultConfig.round:this.round,this.cornerRadius=void 0===this.cornerRadius?this.defaultConfig.cornerRadius:this.cornerRadius,this.preferGravatar=void 0===this.preferGravatar?this.defaultConfig.preferGravatar:this.preferGravatar},t.prototype.initializeAvatar=function(t){this.setDefaultValues();var e="";this.preferGravatar||t?(e=this.gravatarService.generateGravatarUrl(this.email,this.md5Hash,this.requestedSize,this.rating,this.fallback),this.isGravatarUsed=!0):this.src?e=this.src:(e=this.gravatarService.generateGravatarUrl(this.email,this.md5Hash,this.requestedSize,this.rating,this.fallback),this.isGravatarUsed=!0),this.renderer.setProperty(this.elementRef.nativeElement,"src",e),this.setStyle(this.avatarStyle())},t.prototype.computeSize=function(){var t=void 0===this.size?this.defaultConfig.size:this.size;if(this.style&&this.style.width)try{var e=this.style.width.trim();e.match(/^\d+px$/)&&(t=e.replace("px",""))}catch(e){return t}return t},t.prototype.avatarStyle=function(){var t={width:this.size+"px",height:this.size+"px",borderRadius:this.round?this.defaultConfig.borderRadius:this.cornerRadius+"px",borderStyle:this.defaultConfig.hasBorder||this.borderColor||this.borderWidth?this.defaultConfig.borderStyle:"none",borderColor:this.borderColor?this.borderColor:this.defaultConfig.borderColor,borderWidth:this.borderWidth?this.borderWidth+"px":this.defaultConfig.borderWidth+"px",backgroundColor:this.backgroundColor?this.backgroundColor:this.defaultConfig.backgroundColor};return Object.assign(Object.assign({},t),this.style)},t.prototype.setStyle=function(t){var e=this;Object.keys(t).forEach((function(r){e.renderer.setStyle(e.elementRef.nativeElement,r,t[r])}))},t}();d.decorators=[{type:e.Directive,args:[{selector:"[ngx-gravatar], [ngxGravatar]"}]}],d.ctorParameters=function(){return[{type:e.ElementRef},{type:e.Renderer2},{type:s}]},d.propDecorators={src:[{type:e.Input}],email:[{type:e.Input}],md5Hash:[{type:e.Input}],size:[{type:e.Input}],fallback:[{type:e.Input}],rating:[{type:e.Input}],round:[{type:e.Input}],cornerRadius:[{type:e.Input}],borderColor:[{type:e.Input}],borderWidth:[{type:e.Input}],style:[{type:e.Input}],preferGravatar:[{type:e.Input}],backgroundColor:[{type:e.Input}],ratio:[{type:e.Input}]};var h=function(){function t(){}return t.forRoot=function(e){return{ngModule:t,providers:[{provide:o,useValue:e}]}},t}();h.decorators=[{type:e.NgModule,args:[{declarations:[d],exports:[d]}]}],t.GravatarModule=h,t.NgxGravatarService=s,t.ɵa=d,t.ɵb=o,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=ngx-gravatar.umd.min.js.map